"use strict";(()=>{var i=new Map,a=(t,e)=>{i.set(t.url,{content:e,meta:t})},d=t=>{let e=[];for(let n of Array.from(i.entries())){let o=n[0],c=n[1],r=c.content.indexOf(t);r!==-1&&e.push({url:o,meta:c.meta,matchString:c.content.substring(r-100,r+100)})}return e};function s(t){chrome.scripting.executeScript({target:{tabId:t.id||0},files:["dist/content/index.js"]}).then(()=>{console.log("INJECTED THE FOREGROUND SCRIPT.")}).catch(e=>console.log(e))}try{console.log("background Script"),chrome.tabs.query({},t=>{t.forEach(s)}),chrome.tabs.onUpdated.addListener((t,e,n)=>{e.status==="complete"&&/^http/.test((n==null?void 0:n.url)||"")&&s(n)}),chrome.runtime.onMessage.addListener(function(t,e,n){var o;switch(t.type){case"index":{let c={url:t.url,tabId:((o=e.tab)==null?void 0:o.id)||0};a(c,t.content),n("indexed")}break;case"search":{let c=t.key;n(d(c))}}})}catch(t){console.log(t)}})();
//# sourceMappingURL=index.js.map
